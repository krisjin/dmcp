<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hx.dmcp.dao.VisaDao">
	<insert id="addVisa" parameterType="com.hx.dmcp.entity.Visa">
		insert into visa(title,visaType,handleDate,cost,costDescription,acceptPeople,avatarUrl,createDate,category,content) values (#{title},#{visaType},#{handleDate},#{cost},#{costDescription},#{acceptPeople},#{avatarUrl},#{createDate},#{category},#{content})
		<selectKey resultType="long" keyProperty="id">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>

	<delete id="deleteVisa" parameterType="long">
	delete from visa where id=#{id}
	</delete>
	
	<update id="updateVisa" parameterType="com.hx.dmcp.entity.Visa">
		update visa set title=#{title},visaType=#{visaType},handleDate=#{handleDate},cost=#{cost},costDescription=#{costDescription},acceptPeople=#{acceptPeople},avatarUrl=#{avatarUrl},category=#{category},content=#{content} where id=#{id}
	</update>
		
	<select id="getVisaWithPage" resultType="com.hx.dmcp.entity.Visa">
		select * from visa limit #{offset},#{rows}
	</select>
	
	<select id="getAllCounts" resultType="int">
		select count(*) from visa
	</select>
	<select id="getVisaById" resultType="com.hx.dmcp.entity.Visa">
		select * from visa where id=#{id}	
	</select>
	<select id="getVisaes" resultType="com.hx.dmcp.entity.Visa">
		select DISTINCT v.title ,v.avatarUrl,v.cost,v.category from visa v  	
	</select>
	
	<select id="getVisaByName" resultType="com.hx.dmcp.entity.Visa">
		select * from visa where title=#{title}
	</select>
	
	<select id="getAllVisa" resultType="com.hx.dmcp.entity.Visa">
		select * from visa
	</select>
	
</mapper>  
